import requests
from requests.structures import CaseInsensitiveDict
import time

page = 1
while 1:
    next_url = f'https://api.bilibili.com/x/web-interface/popular?ps=20&pn={page}'
    headers = CaseInsensitiveDict()

    time.sleep(1)
    r = requests.get('https://api.bilibili.com/x/web-interface/popular', headers=headers)
    # print(r.status_code)
    json_content = r.json()
    for item in json_content['data']['list']:
        print(item['title'])
    page +=1
    if page > 2:
        break

